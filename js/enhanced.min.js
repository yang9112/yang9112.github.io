class EnhancedSearch{constructor(){this.searchData=new Map,this.searchIndex=new Map,this.isInitialized=!1,this.searchForm=null,this.searchInput=null,this.searchResults=null,this.init()}init(){this.setupSearchElements(),this.buildSearchIndex(),this.bindEvents(),this.isInitialized=!0}setupSearchElements(){if(this.searchForm=document.querySelector(".search"),this.searchInput=document.querySelector('.search input[type="search"]'),!document.getElementById("search-results")){const t=document.createElement("div");t.id="search-results",t.className="search-results",t.innerHTML='\n        <div class="search-results-header">\n          <h3>æœç´¢ç»“æœ</h3>\n          <button class="search-close" id="searchClose">&times;</button>\n        </div>\n        <div class="search-results-list" id="searchResultsList"></div>\n      ',document.body.appendChild(t)}this.searchResults=document.getElementById("search-results"),this.searchResultsList=document.getElementById("searchResultsList")}buildSearchIndex(){document.querySelectorAll("article.post, article.page").forEach((t,e)=>{const n=t.querySelector("h1")?.textContent||"",s=t.querySelector(".article-content")?.textContent||"",a=t.querySelector("a[href]")?.href||window.location.href,o=t.querySelector("time")?.textContent||"",r=this.extractCategories(t),i=this.extractTags(t),c={index:e,title:n.toLowerCase(),content:s.toLowerCase(),url:a,date:o,categories:r.map(t=>t.toLowerCase()),tags:i.map(t=>t.toLowerCase()),excerpt:this.createExcerpt(s)};this.searchData.set(e,c),this.indexKeywords(c)})}extractKeywords(t){const e=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","is","was","are","were","been","have","has","had","do","does","did","will","would","could","should"]);return t.toLowerCase().split(/[\\s\\W_]+/).filter(t=>t.length>2&&!e.has(t)).filter(t=>/[\\u4e00-\\u9fa5a-zA-Z0-9]/.test(t))}indexKeywords(t){const e=`${t.title} ${t.content} ${t.categories.join(" ")} ${t.tags.join(" ")}`;this.extractKeywords(e).forEach(e=>{this.searchIndex.has(e)||this.searchIndex.set(e,new Set),this.searchIndex.get(e).add(t.index)})}extractCategories(t){const e=[];return t.querySelectorAll(".article-categories a").forEach(t=>e.push(t.textContent)),e}extractTags(t){const e=[];return t.querySelectorAll(".article-tags a").forEach(t=>e.push(t.textContent)),e}createExcerpt(t,e=150){const n=t.replace(/<[^>]*>/g,"").trim();if(n.length<=e)return n;const s=n.substring(0,e),a=s.lastIndexOf(" ");return a>0?s.substring(0,a)+"...":s+"..."}bindEvents(){this.searchInput&&(this.searchInput.addEventListener("input",this.debounce(t=>{const e=t.target.value.trim();e.length>=2?this.performSearch(e):this.hideSearchResults()},300)),this.searchInput.addEventListener("keydown",t=>{if("Enter"===t.key){t.preventDefault();const e=t.target.value.trim();e.length>=2&&this.performSearch(e)}"Escape"===t.key&&this.hideSearchResults()}));const t=document.getElementById("searchClose");t&&t.addEventListener("click",()=>this.hideSearchResults()),document.addEventListener("click",t=>{this.searchResults.contains(t.target)||this.searchForm.contains(t.target)||this.hideSearchResults()})}performSearch(t){const e=this.extractKeywords(t),n=new Map;e.forEach(t=>{const s=this.searchIndex.get(t);s&&s.forEach(t=>{if(this.searchData.has(t)){const s=this.searchData.get(t),a=this.calculateScore(s,e);(!n.has(t)||n.get(t).score<a)&&n.set(t,{...s,score:a})}})});const s=Array.from(n.values()).sort((t,e)=>e.score-t.score).slice(0,10);this.displaySearchResults(s,t)}calculateScore(t,e){let n=0;const s=t.title,a=t.content;e.forEach(e=>{s.includes(e)&&(n+=e===s?10:5);const o=(a.match(new RegExp(e,"g"))||[]).length;n+=o,t.categories.forEach(t=>{t.includes(e)&&(n+=3)}),t.tags.forEach(t=>{t.includes(e)&&(n+=2)})});const o=e.join(" ");return a.includes(o)&&(n+=8),s.includes(o)&&(n+=15),n}displaySearchResults(t,e){0===t.length?this.searchResultsList.innerHTML=`\n        <div class="no-results">\n          <i class="fas fa-search"></i>\n          <p>æœªæ‰¾åˆ°ä¸ "<strong>${this.escapeHtml(e)}</strong>" ç›¸å…³çš„å†…å®¹</p>\n          <p>å»ºè®®ï¼š</p>\n          <ul>\n            <li>æ£€æŸ¥æ‹¼å†™æ˜¯å¦æ­£ç¡®</li>\n            <li>å°è¯•ä½¿ç”¨æ›´é€šç”¨çš„å…³é”®è¯</li>\n            <li>å°è¯•ä½¿ç”¨ä¸åŒçš„æœç´¢è¯</li>\n          </ul>\n        </div>\n      `:this.searchResultsList.innerHTML=t.map(t=>{const n=this.highlightText(t.title,e),s=this.highlightText(t.excerpt,e);return`\n          <div class="search-result-item">\n            <h4><a href="${t.url}">${n}</a></h4>\n            <p class="search-result-excerpt">${s}</p>\n            <div class="search-result-meta">\n              ${t.date?`<span class="search-result-date">${t.date}</span>`:""}\n              ${t.categories.length>0?`\n                <span class="search-result-categories">\n                  <i class="fas fa-folder"></i> ${t.categories.join(", ")}\n                </span>\n              `:""}\n              ${t.tags.length>0?`\n                <span class="search-result-tags">\n                  <i class="fas fa-tag"></i> ${t.tags.slice(0,3).join(", ")}\n                  ${t.tags.length>3?"...":""}\n                </span>\n              `:""}\n            </div>\n          </div>\n        `}).join(""),this.showSearchResults()}highlightText(t,e){if(!e)return this.escapeHtml(t);const n=this.extractKeywords(e);let s=this.escapeHtml(t);return n.forEach(t=>{const e=new RegExp(`(${t})`,"gi");s=s.replace(e,"<mark>$1</mark>")}),s}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}showSearchResults(){this.searchResults.classList.add("show"),document.body.style.overflow="hidden"}hideSearchResults(){this.searchResults.classList.remove("show"),document.body.style.overflow="",this.searchInput&&(this.searchInput.value="")}debounce(t,e){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...s)},e)}}static init(){return window.enhancedSearch||(window.enhancedSearch=new EnhancedSearch),window.enhancedSearch}search(t){this.isInitialized&&this.performSearch(t)}clearSearch(){this.hideSearchResults()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>EnhancedSearch.init()):EnhancedSearch.init(),"undefined"!=typeof module&&module.exports&&(module.exports=EnhancedSearch);class EnhancedComments{constructor(t={}){this.options={container:"#comments",apiUrl:"/api/comments",enableReplies:!0,enableModeration:!1,enableRichText:!0,maxCharacters:1e3,autoSave:!0,...t},this.comments=[],this.currentUser=null,this.sortBy="newest",this.isLoading=!1,this.init()}async init(){try{await this.loadCurrentUser(),await this.loadComments(),this.setupEventListeners(),this.render()}catch(t){console.error("Failed to initialize comments:",t),this.showError("è¯„è®ºç³»ç»ŸåŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•")}}setupEventListeners(){const t=document.querySelector("#comment-form");t&&t.addEventListener("submit",t=>this.handleFormSubmit(t));const e=document.querySelector("#comment-text");e&&e.addEventListener("input",t=>this.updateCharacterCount(t)),this.options.enableRichText&&this.setupRichTextEditor(),document.querySelectorAll(".sort-btn").forEach(t=>{t.addEventListener("click",t=>this.handleSort(t))})}async loadCurrentUser(){try{this.currentUser={id:"user_"+Math.random().toString(36).substr(2,9),name:"è®¿å®¢ç”¨æˆ·",avatar:null,email:null}}catch(t){console.warn("Failed to load user:",t)}}async loadComments(){this.isLoading=!0;try{const t=[{id:"1",author:"å¼ ä¸‰",content:"è¿™ä¸ªç½‘ç«™è®¾è®¡å¾—çœŸä¸é”™ï¼ç•Œé¢ç®€æ´ç¾è§‚ï¼ŒåŠ è½½é€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚",timestamp:new Date(Date.now()-36e5).toISOString(),likes:5,replies:[{id:"1-1",author:"æå››",content:"åŒæ„æ¥¼ä¸Šçš„è§‚ç‚¹ï¼Œç‰¹åˆ«æ˜¯æ·±è‰²æ¨¡å¼çš„è®¾è®¡å¾ˆè´´å¿ƒã€‚",timestamp:new Date(Date.now()-18e5).toISOString(),likes:2}]},{id:"2",author:"ç‹äº”",content:"è¯·é—®ç½‘ç«™çš„æºç æ˜¯å¼€æºçš„å—ï¼Ÿæƒ³å­¦ä¹ ä¸€ä¸‹å‰ç«¯å¼€å‘æŠ€æœ¯ã€‚",timestamp:new Date(Date.now()-72e5).toISOString(),likes:3}];this.comments=t}catch(t){console.error("Failed to load comments:",t),this.comments=[]}finally{this.isLoading=!1}}render(){const t=document.querySelector(this.options.container);t&&(t.innerHTML=`\n            <div class="comments-section">\n                ${this.renderHeader()}\n                ${this.renderForm()}\n                ${this.renderCommentsList()}\n                ${this.renderLoadMore()}\n            </div>\n        `,this.attachEventListeners())}renderHeader(){return`\n            <div class="comments-header">\n                <div class="comments-count">å…± ${this.getTotalComments()} æ¡è¯„è®º</div>\n                <div class="comments-sort">\n                    <button class="sort-btn ${"newest"===this.sortBy?"active":""}" data-sort="newest">\n                        æœ€æ–°\n                    </button>\n                    <button class="sort-btn ${"popular"===this.sortBy?"active":""}" data-sort="popular">\n                        æœ€çƒ­\n                    </button>\n                    <button class="sort-btn ${"oldest"===this.sortBy?"active":""}" data-sort="oldest">\n                        æœ€æ—©\n                    </button>\n                </div>\n            </div>\n        `}renderForm(){return this.currentUser?`\n            <div class="comment-form">\n                <form id="comment-form">\n                    <div class="form-group">\n                        <label class="form-label" for="comment-text">å‘è¡¨è¯„è®º</label>\n                        <textarea \n                            id="comment-text" \n                            class="form-textarea" \n                            placeholder="åˆ†äº«ä½ çš„æƒ³æ³•..."\n                            maxlength="${this.options.maxCharacters}"\n                            required\n                        ></textarea>\n                        <div class="character-count">\n                            <span id="char-count">0</span> / ${this.options.maxCharacters}\n                        </div>\n                    </div>\n                    \n                    ${this.options.enableRichText?this.renderRichTextToolbar():""}\n                    \n                    <div class="form-toolbar">\n                        <div class="toolbar-actions">\n                            ${this.options.enableRichText?'\n                                <button type="button" class="toolbar-btn" data-action="bold">\n                                    <strong>B</strong>\n                                </button>\n                                <button type="button" class="toolbar-btn" data-action="italic">\n                                    <em>I</em>\n                                </button>\n                                <button type="button" class="toolbar-btn" data-action="link">\n                                    ğŸ”—\n                                </button>\n                            ':""}\n                        </div>\n                        <button type="submit" class="submit-btn" id="submit-btn">\n                            å‘è¡¨è¯„è®º\n                        </button>\n                    </div>\n                </form>\n            </div>\n        `:'\n                <div class="login-prompt">\n                    <p>è¯·ç™»å½•åå‘è¡¨è¯„è®º</p>\n                </div>\n            '}renderRichTextToolbar(){return'\n            <div class="rich-text-toolbar">\n                <div class="toolbar-actions">\n                    <button type="button" class="toolbar-btn" data-action="bold">\n                        <strong>B</strong>\n                    </button>\n                    <button type="button" class="toolbar-btn" data-action="italic">\n                        <em>I</em>\n                    </button>\n                    <button type="button" class="toolbar-btn" data-action="link">\n                        ğŸ”—\n                    </button>\n                    <button type="button" class="toolbar-btn" data-action="code">\n                        &lt;/&gt;\n                    </button>\n                    <button type="button" class="toolbar-btn" data-action="quote">\n                        â\n                    </button>\n                </div>\n            </div>\n        '}renderCommentsList(){if(this.isLoading)return'<div class="loading">åŠ è½½è¯„è®ºä¸­...</div>';if(0===this.comments.length)return'<div class="no-comments">è¿˜æ²¡æœ‰è¯„è®ºï¼Œæ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</div>';return`\n            <div class="comments-list">\n                ${this.sortComments(this.comments).map(t=>this.renderComment(t)).join("")}\n            </div>\n        `}renderComment(t,e=!1){return e?`\n                <div class="reply-item" data-comment-id="${t.id}">\n                    <div class="comment-header">\n                        <div class="comment-avatar">\n                            ${t.author.charAt(0).toUpperCase()}\n                        </div>\n                        <div class="comment-meta">\n                            <div class="comment-author">${t.author}</div>\n                            <div class="comment-time">${this.formatTime(t.timestamp)}</div>\n                        </div>\n                    </div>\n                    <div class="comment-content">\n                        ${this.formatContent(t.content)}\n                    </div>\n                    <div class="comment-actions">\n                        <button class="action-btn" data-action="like">\n                            ğŸ‘ ${t.likes||0}\n                        </button>\n                        ${this.options.enableReplies?'\n                            <button class="action-btn" data-action="reply">\n                                ğŸ’¬ å›å¤\n                            </button>\n                        ':""}\n                        ${this.options.enableModeration&&this.currentUser?.id===t.author?'\n                            <button class="action-btn" data-action="edit">\n                                âœï¸ ç¼–è¾‘\n                            </button>\n                            <button class="action-btn" data-action="delete">\n                                ğŸ—‘ï¸ åˆ é™¤\n                            </button>\n                        ':""}\n                    </div>\n                </div>\n            `:`\n            <div class="comment-item" data-comment-id="${t.id}">\n                <div class="comment-header">\n                    <div class="comment-avatar">\n                        ${t.author.charAt(0).toUpperCase()}\n                    </div>\n                    <div class="comment-meta">\n                        <div class="comment-author">${t.author}</div>\n                        <div class="comment-time">${this.formatTime(t.timestamp)}</div>\n                    </div>\n                    <div class="comment-actions">\n                        <button class="action-btn" data-action="like">\n                            ğŸ‘ ${t.likes||0}\n                        </button>\n                        ${this.options.enableReplies?'\n                            <button class="action-btn" data-action="reply">\n                                ğŸ’¬ å›å¤\n                            </button>\n                        ':""}\n                        ${this.options.enableModeration&&this.currentUser?.id===t.author?'\n                            <button class="action-btn" data-action="edit">\n                                âœï¸ ç¼–è¾‘\n                            </button>\n                            <button class="action-btn" data-action="delete">\n                                ğŸ—‘ï¸ åˆ é™¤\n                            </button>\n                        ':""}\n                    </div>\n                </div>\n                <div class="comment-content">\n                    ${this.formatContent(t.content)}\n                </div>\n                ${this.options.enableReplies&&t.replies?.length>0?`\n                    <div class="replies-section">\n                        <div class="replies-list">\n                            ${t.replies.map(t=>this.renderComment(t,!0)).join("")}\n                        </div>\n                    </div>\n                `:""}\n            </div>\n        `}renderLoadMore(){return 0===this.comments.length?"":'\n            <button class="load-more-btn" id="load-more-comments">\n                åŠ è½½æ›´å¤šè¯„è®º\n            </button>\n        '}attachEventListeners(){document.querySelectorAll(".action-btn").forEach(t=>{t.addEventListener("click",t=>{t.stopPropagation(),this.handleAction(t)})}),document.querySelectorAll(".toolbar-btn").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),this.handleRichTextAction(t)})});const t=document.querySelector("#load-more-comments");t&&t.addEventListener("click",()=>this.loadMoreComments())}handleFormSubmit(t){t.preventDefault();const e=document.querySelector("#comment-text").value.trim();e?this.submitComment(e):this.showError("è¯·è¾“å…¥è¯„è®ºå†…å®¹")}async submitComment(t){const e=document.querySelector("#submit-btn"),n=e.textContent;try{e.disabled=!0,e.textContent="å‘å¸ƒä¸­...";const n={id:"comment_"+Date.now(),author:this.currentUser.name,content:t,timestamp:(new Date).toISOString(),likes:0,replies:[]};this.comments.unshift(n),document.querySelector("#comment-text").value="",this.updateCharacterCount({target:{value:""}}),this.render(),this.showSuccess("è¯„è®ºå‘è¡¨æˆåŠŸï¼")}catch(t){console.error("Failed to submit comment:",t),this.showError("è¯„è®ºå‘è¡¨å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{e.disabled=!1,e.textContent=n}}handleAction(t){const e=t.currentTarget,n=e.dataset.action,s=e.closest("[data-comment-id]").dataset.commentId;switch(n){case"like":this.likeComment(s);break;case"reply":this.replyToComment(s);break;case"edit":this.editComment(s);break;case"delete":this.deleteComment(s)}}likeComment(t){const e=this.findComment(t);e&&(e.likes=(e.likes||0)+1,this.render())}replyToComment(t){const e=document.querySelector("#comment-text");e.value=`@${this.findComment(t).author} `,e.focus(),this.updateCharacterCount({target:e})}findComment(t){let e=this.comments.find(e=>e.id===t);if(e)return e;for(const n of this.comments)if(n.replies&&(e=n.replies.find(e=>e.id===t),e))return e;return null}handleSort(t){const e=t.currentTarget;this.sortBy=e.dataset.sort,document.querySelectorAll(".sort-btn").forEach(t=>{t.classList.remove("active")}),e.classList.add("active"),this.render()}sortComments(t){const e=[...t];switch(this.sortBy){case"newest":return e.sort((t,e)=>new Date(e.timestamp)-new Date(t.timestamp));case"oldest":return e.sort((t,e)=>new Date(t.timestamp)-new Date(e.timestamp));case"popular":return e.sort((t,e)=>(e.likes||0)-(t.likes||0));default:return e}}updateCharacterCount(t){const e=t.target.value.length,n=document.querySelector("#char-count"),s=document.querySelector("#submit-btn");n&&(n.textContent=e,n.style.color=e>.9*this.options.maxCharacters?"#ff6b6b":"#666"),s&&(s.disabled=0===e||e>this.options.maxCharacters)}handleRichTextAction(t){const e=t.currentTarget.dataset.action,n=document.querySelector("#comment-text"),s=n.selectionStart,a=n.selectionEnd,o=n.value.substring(s,a);let r="";switch(e){case"bold":r=`**${o||"ç²—ä½“æ–‡æœ¬"}**`;break;case"italic":r=`*${o||"æ–œä½“æ–‡æœ¬"}*`;break;case"code":r=`\`${o||"ä»£ç "}\``;break;case"quote":r=`> ${o||"å¼•ç”¨æ–‡æœ¬"}`;break;case"link":const t=prompt("è¯·è¾“å…¥é“¾æ¥åœ°å€:","https://");t&&(r=`[${o||"é“¾æ¥æ–‡æœ¬"}](${t})`)}r&&(n.value=n.value.substring(0,s)+r+n.value.substring(a),n.focus(),n.setSelectionRange(s+r.length,s+r.length),this.updateCharacterCount({target:n}))}formatContent(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/^> (.*?)$/gm,"<blockquote>$1</blockquote>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>').replace(/\n/g,"<br>")}formatTime(t){const e=new Date(t),n=new Date-e,s=Math.floor(n/6e4),a=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"åˆšåˆš":s<60?`${s}åˆ†é’Ÿå‰`:a<24?`${a}å°æ—¶å‰`:o<30?`${o}å¤©å‰`:e.toLocaleDateString("zh-CN")}getTotalComments(){let t=this.comments.length;return this.comments.forEach(e=>{e.replies&&(t+=e.replies.length)}),t}showSuccess(t){this.showNotification(t,"success")}showError(t){this.showNotification(t,"error")}showNotification(t,e="info"){const n=document.createElement("div");n.className=`notification ${e}`,n.textContent=t,n.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 1rem 1.5rem;\n            background: ${"success"===e?"#d4edda":"error"===e?"#f8d7da":"#d1ecf1"};\n            border: 1px solid ${"success"===e?"#c3e6cb":"error"===e?"#f5c6cb":"#bee5eb"};\n            border-radius: 6px;\n            color: ${"success"===e?"#155724":"error"===e?"#721c24":"#0c5460"};\n            z-index: 1000;\n            animation: slideIn 0.3s ease;\n        `,document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease",setTimeout(()=>n.remove(),300)},3e3)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#comments")&&new EnhancedComments});const style=document.createElement("style");style.textContent="\n    @keyframes slideIn {\n        from {\n            transform: translateX(100%);\n            opacity: 0;\n        }\n        to {\n            transform: translateX(0);\n            opacity: 1;\n        }\n    }\n    \n    @keyframes slideOut {\n        from {\n            transform: translateX(0);\n            opacity: 1;\n        }\n        to {\n            transform: translateX(100%);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(style),"undefined"!=typeof module&&module.exports&&(module.exports=EnhancedComments);class SocialShare{constructor(){this.init()}init(){this.addShareButtons(),this.initShareEvents()}addShareButtons(){document.querySelectorAll(".article-entry").forEach(t=>{document.querySelector("title"),window.location.href;const e=document.createElement("div");e.className="social-share-container",e.innerHTML='\n        <div class="social-share">\n          <span class="share-label">åˆ†äº«åˆ°ï¼š</span>\n          <a href="#" class="share-btn share-weibo" data-platform="weibo" title="åˆ†äº«åˆ°å¾®åš">\n            <i class="fab fa-weibo"></i>\n          </a>\n          <a href="#" class="share-btn share-twitter" data-platform="twitter" title="åˆ†äº«åˆ°Twitter">\n            <i class="fab fa-twitter"></i>\n          </a>\n          <a href="#" class="share-btn share-facebook" data-platform="facebook" title="åˆ†äº«åˆ°Facebook">\n            <i class="fab fa-facebook-f"></i>\n          </a>\n          <a href="#" class="share-btn share-linkedin" data-platform="linkedin" title="åˆ†äº«åˆ°LinkedIn">\n            <i class="fab fa-linkedin-in"></i>\n          </a>\n          <a href="#" class="share-btn share-copy" data-platform="copy" title="å¤åˆ¶é“¾æ¥">\n            <i class="fas fa-link"></i>\n          </a>\n        </div>\n      ',t.firstChild&&t.appendChild(e)})}initShareEvents(){document.querySelectorAll(".share-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=t.dataset.platform;this.share(n)})})}share(t){const e=document.querySelector("title")?.textContent||"Yang's Home",n=window.location.href,s=(document.querySelector('meta[name="description"]'),{weibo:`https://service.weibo.com/share/share.php?url=${encodeURIComponent(n)}&title=${encodeURIComponent(e)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(n)}&text=${encodeURIComponent(e)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(n)}`});"copy"===t?this.copyToClipboard(n):s[t]&&window.open(s[t],"_blank","width=600,height=400,scrollbars=yes,resizable=yes")}copyToClipboard(t){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(()=>{this.showCopyMessage()}).catch(e=>{console.error("Failed to copy: ",e),this.fallbackCopyToClipboard(t)}):this.fallbackCopyToClipboard(t)}fallbackCopyToClipboard(t){const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.showCopyMessage()}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(e)}showCopyMessage(){const t=document.querySelector(".share-copy"),e=t.innerHTML;t.innerHTML='<i class="fas fa-check"></i>',t.style.color="#4CAF50",setTimeout(()=>{t.innerHTML=e,t.style.color=""},2e3)}}document.addEventListener("DOMContentLoaded",()=>{new SocialShare});class LazyLoader{constructor(){this.imageObserver=null,this.loadedImages=new Set,this.init()}init(){"IntersectionObserver"in window?this.setupIntersectionObserver():this.setupLegacyLoading()}setupIntersectionObserver(){this.imageObserver=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;this.loadImage(n),e.unobserve(n)}})},{root:null,rootMargin:"50px 0px",threshold:.1}),this.observeImages()}setupLegacyLoading(){let t=null;const e=()=>{this.lazyLoadLegacy()},n=()=>{t&&clearTimeout(t),t=setTimeout(e,200)};window.addEventListener("scroll",n),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),e()}observeImages(){document.querySelectorAll("img[data-src]").forEach(t=>{this.loadedImages.has(t.src)||this.imageObserver.observe(t)})}lazyLoadLegacy(){const t=document.querySelectorAll("img[data-src]"),e=window.innerHeight;t.forEach(t=>{const n=t.getBoundingClientRect();n.top>=0&&n.top<=e+200&&!this.loadedImages.has(t.src)&&this.loadImage(t)})}loadImage(t){const e=t.getAttribute("data-src");if(!e||this.loadedImages.has(e))return;this.loadedImages.add(e);const n=new Image;n.onload=()=>{t.src=e,t.removeAttribute("data-src"),t.classList.add("loaded"),this.addLoadingAnimation(t)},n.onerror=()=>{t.classList.add("error"),console.warn("Failed to load image:",e)},n.src=e}addLoadingAnimation(t){t.style.opacity="0",t.style.transition="opacity 0.3s ease-in-out",setTimeout(()=>{t.style.opacity="1"},10)}convertExistingImages(){document.querySelectorAll("img:not([data-src])").forEach(t=>{t.src.includes("data:")||t.hasAttribute("data-skip-lazy")||t.width<100||t.height<100||(t.setAttribute("data-src",t.src),t.src=this.getPlaceholderImage(),this.imageObserver&&this.imageObserver.observe(t))})}getPlaceholderImage(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmMGYwZjAiLz48L3N2Zz4="}preloadCriticalImages(){document.querySelectorAll("img[data-critical]").forEach(t=>{const e=t.getAttribute("data-src");if(e&&!this.loadedImages.has(e)){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)}})}static init(){return window.lazyLoader||(window.lazyLoader=new LazyLoader),window.lazyLoader}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>LazyLoader.init()):LazyLoader.init(),"undefined"!=typeof module&&module.exports&&(module.exports=LazyLoader);